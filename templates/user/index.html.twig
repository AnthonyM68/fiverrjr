{% extends 'base.html.twig' %}
{% block body %}
{% block linkBtn %}
<script>
    //  deleteService: "{{ path('delete_service', {'serviceId': 'serviceId'}) }}",
    const urls = {
        editService: "{{ path('edit_service', {'id' :'serviceId'}) }}",
       
    };
</script>
{% endblock %}
<div class="custom-container">
    <h1 class="uk-animation-slide-right">Bienvenue sur votre {{ title_page }} {{ app.user }}</h1>

    <div class="separator">{% include "alertflash/flash_message.html.twig" %}</div>
</div>
<div class="custom-container">
    <div class="ui grid equal-height-columns">



        <div class="eight wide column">
            <div class="ui grid equal-height-columns">

                <div class="eight wide column">
                    <div class="ui segment f">
                        {{ form_start(form, {'attr': {'class': 'ui form profile'}}) }}
                        <div class="ui form">

                            {% if user.picture %}
                            <div class="field ">
                                <img id="imagePreview"
                                    src="{% if pictureUrl|default %} {{ asset(pictureUrl) }} {% endif %}"
                                    alt="Image Preview profile user" />
                            </div>
                            {% endif %}

                            <div class="field">
                                {{ form_label(form.picture) }}
                                {{ form_widget(form.picture, {'attr': {'onchange': 'previewImage(event)'}}) }}
                                {{ form_errors(form.picture) }}
                            </div>
                            <div class="field">
                                {{ form_label(form.date_register) }}
                                {{ form_widget(form.date_register) }}
                                {{ form_errors(form.date_register) }}
                            </div>
                            <div class="field">
                                {{ form_label(form.username) }}
                                {{ form_widget(form.username) }}
                                {{ form_errors(form.username) }}
                            </div>
                            <div class="field">
                                {{ form_label(form.first_name) }}
                                {{ form_widget(form.first_name) }}
                                {{ form_errors(form.first_name) }}
                            </div>
                            <div class="field">
                                {{ form_label(form.last_name) }}
                                {{ form_widget(form.last_name) }}
                                {{ form_errors(form.last_name) }}
                            </div>
                            <div class="field">
                                {{ form_label(form.phone_number) }}
                                {{ form_widget(form.phone_number) }}
                                {{ form_errors(form.phone_number) }}
                            </div>
                            <div class="field">
                                {{ form_label(form.city) }}
                                {{ form_widget(form.city) }}
                                {{ form_errors(form.city) }}
                            </div>
                            <div class="field">
                                {{ form_label(form.portfolio) }}
                                {{ form_widget(form.portfolio) }}
                                {{ form_errors(form.portfolio) }}
                            </div>
                            <div class="field">
                                {{ form_label(form.bio) }}
                                {{ form_widget(form.bio) }}
                                {{ form_errors(form.bio) }}
                            </div>
                        </div>
                        {{ form_end(form) }}
                    </div>
                </div>
                <div class="eight wide column">
                    {% if is_granted('ROLE_CLIENT') %}
                    <div class="ui segment" id="last-developer-root">
                        {% if lastDeveloper|default %}
                        {{ lastDeveloper }}
                        {% endif %}
                    </div>
                    {% elseif is_granted('ROLE_DEVELOPER') %}
                    <div class="ui segment" id="last-client-root">
                        {% if lastDeveloper|default %}
                        {{ lastDeveloper }}
                        {% endif %}
                    </div>
                    {% endif %}
                    <div class="column">
                        <div class="ui segment ">




                            <div class="ui container">
                                Button 3...
                            </div>




                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="eight wide column">
            <div class="ui segment">
                <h2>Commandes en cours (Order)</h2>
                {% if orders is iterable %}
                <div class="ui relaxed divided list">
                    {% for order in orders %}
                    <div class="item">
                        <i class="large middle aligned history icon"></i>
                        <div class="content">
                            <a class="header">{{ order.title}}</a>
                            <div class="description">{{ order.dateOrder|date("d/m/Y H:i") }}</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
                <div class="ui container">
                    Button 1...
                </div>
            </div>

            <div class="ui segment">

                <div class="ui container">


                    {% if is_granted('ROLE_CLIENT') %}
                    <div class="ui segment" id="last-developer-root">


                    </div>
                    {% elseif is_granted('ROLE_DEVELOPER') %}
                    <div class="container">
                        <a href="javascript:void(0);" class="ui button primary toggle-service-form">
                            Nouveau service
                        </a>
                        <a href="javascript:void(0);" class="ui button primary toggle-list-services">
                            Liste de mes services
                        </a>
                    </div>
                    <div class="ui segment service-form" style="display: none;">

                        <h2>Nouveau service</h2>

                        {# formulaire d'ajout d'un nouveau service #}
                        {% if formAddService is defined %}

                        {{ form_start(formAddService, {'attr': {'class': 'ui form service-form'}}) }}
                        <div class="field">
                            {{ form_label(formAddService.course.theme) }}
                            {{ form_widget(formAddService.course.theme) }}
                            {{ form_errors(formAddService.course.theme) }}
                        </div>
                        <div class="field">
                            {{ form_label(formAddService.course.category) }}
                            {{ form_widget(formAddService.course.category) }}
                            {{ form_errors(formAddService.course.category) }}
                        </div>
                        <div class="field">
                            {{ form_label(formAddService.course.course) }}
                            {{ form_widget(formAddService.course.course) }}
                            {{ form_errors(formAddService.course.course) }}
                        </div>
                        <hr>
                        {# Prévisualisation de l'image existante #}
                        {% if service|default %}
                        <img id="imagePreview" src="{{ asset(service.picture) }}" alt="Image Preview"
                            style="max-width: 200px; max-height: 200px;" />
                        {% endif %}

                        <div class="field">
                            {{ form_label(formAddService.picture) }}
                            {{ form_widget(formAddService.picture, {'attr': {'onchange':
                            'previewImage(event)'}}) }}
                            {{ form_errors(formAddService.picture) }}
                        </div>
                        <div class="field">
                            {{ form_label(formAddService.title) }}
                            {{ form_widget(formAddService.title) }}
                            {{ form_errors(formAddService.title) }}
                        </div>
                        <div class="field">
                            {{ form_label(formAddService.description) }}
                            {{ form_widget(formAddService.description) }}
                            {{ form_errors(formAddService.description) }}
                        </div>
                        <div class="field">
                            {{ form_label(formAddService.price) }}
                            {{ form_widget(formAddService.price) }}
                            {{ form_errors(formAddService.price) }}
                        </div>
                        <div class="field">
                            {{ form_label(formAddService.duration) }}
                            {{ form_widget(formAddService.duration) }}
                            {{ form_errors(formAddService.duration) }}
                        </div>
                        <div class="field">
                            {{ form_row(formAddService.submit) }}
                        </div>
                        {{ form_end(formAddService) }}
                        {% endif %}
                        {% endif %}
                    </div>
                    <div class="ui segment list-services" style="display: none;">

                        <h2>Mes services</h2>

                        <table class="ui celled table">
                            <thead>
                                <tr>
                                    <th>Intitulé du service</th>
                                    <th>Actions</th>

                                </tr>
                            </thead>
                            <tbody id="service_item_list">




                                <tr>
                                    <td data-label="service-title">titre</td>
                                    <td data-label="service-btn">
                                        <div class="ui buttons">
                                            <button class="ui-button ui-widget ui-corner-all">
                                                <span class="ui-icon ui-icon-trash"></span>
                                            </button>
                                            <button class="ui-button ui-widget ui-corner-all">
                                                <span class="ui-icon ui-icon-pencil"></span>
                                            </button>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>





                </div>
                {# <div class="ui container">
                    <hr>
                    {% if is_granted('ROLE_DEVELOPER') %}
                    <a href="{{ path('new_service') }}" class="ui button primary">
                        Déposer un service
                    </a>
                    <a href="" class="ui button primary">
                        Modifier un service
                    </a>

                    <a href="" class="ui button primary">
                        Suprimer un service
                    </a>
                    <hr>
                    <a href="{{ path('list_orders_developer') }}" class="ui button primary">
                        Mes commandes
                    </a>
                    {% elseif is_granted('ROLE_CLIENT') %}
                    <a href="{{ path('list_orders_developer') }}" class="ui button primary">
                        Mes factures
                    </a>
                    <a href="{{ path('new_order_client') }}" class="ui button primary">
                        Nouvelle Commande
                    </a>
                    {% endif %}
                </div> #}
            </div>

            <div class="ui segment">

                <div class="ui container">
                    Button 2...
                </div>
                {# <div class="ui container">
                    <hr>
                    {% if is_granted('ROLE_DEVELOPER') %}
                    <a href="{{ path('new_service') }}" class="ui button primary">
                        Déposer un service
                    </a>
                    <a href="" class="ui button primary">
                        Modifier un service
                    </a>

                    <a href="" class="ui button primary">
                        Suprimer un service
                    </a>
                    <hr>
                    <a href="{{ path('list_orders_developer') }}" class="ui button primary">
                        Mes commandes
                    </a>
                    {% elseif is_granted('ROLE_CLIENT') %}
                    <a href="{{ path('list_orders_developer') }}" class="ui button primary">
                        Mes factures
                    </a>
                    <a href="{{ path('new_order_client') }}" class="ui button primary">
                        Nouvelle Commande
                    </a>
                    {% endif %}
                </div> #}
            </div>


        </div>
    </div>
</div>


{% block javascripts %}
{{ parent() }}
{# On inject le script pour la gestion des contenus dynamique des select #}
{{ encore_entry_script_tags('ViewServiceForm') }}
{# On inject le script pour la prévisualisation de l'image avant upload (enregistrement) #}
{{ encore_entry_script_tags('previewImage') }}
{% endblock %}
{% endblock %}